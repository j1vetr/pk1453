root@162-55-4-35:/var/www/posta-kodlari# npm install
npm warn deprecated @esbuild-kit/esm-loader@2.6.5: Merged into tsx: https://tsx.is
npm warn deprecated @esbuild-kit/core-utils@3.3.2: Merged into tsx: https://tsx.is

added 495 packages, and audited 496 packages in 7s

65 packages are looking for funding
  run `npm fund` for details

8 vulnerabilities (3 low, 5 moderate)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
root@162-55-4-35:/var/www/posta-kodlari# SESSION_SECRET=$(openssl rand -base64 32)
root@162-55-4-35:/var/www/posta-kodlari# cat > /var/www/posta-kodlari/.env << EOF
NODE_ENV=production
PORT=5000
DATABASE_URL=postgresql://posta_user:PostaKodu2025!@localhost:5432/posta_kodlari
PGHOST=localhost
PGPORT=5432
PGDATABASE=posta_kodlari
PGUSER=posta_user
PGPASSWORD=PostaKodu2025!
SESSION_SECRET=$SESSION_SECRET
EOF
root@162-55-4-35:/var/www/posta-kodlari# cat /var/www/posta-kodlari/.env
NODE_ENV=production
PORT=5000
DATABASE_URL=postgresql://posta_user:PostaKodu2025!@localhost:5432/posta_kodlari
PGHOST=localhost
PGPORT=5432
PGDATABASE=posta_kodlari
PGUSER=posta_user
PGPASSWORD=PostaKodu2025!
SESSION_SECRET=RjHmAhwWLr80rQCpzVuzWMRgipjnSD9OP2qJmmAZz50=
root@162-55-4-35:/var/www/posta-kodlari# cd /var/www/posta-kodlari
root@162-55-4-35:/var/www/posta-kodlari# npm run db:push

> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/var/www/posta-kodlari/drizzle.config.ts'
Using 'pg' driver for database querying
[✓] Pulling schema from database...
[✓] Changes applied
root@162-55-4-35:/var/www/posta-kodlari# mkdir -p /var/www/posta-kodlari/logs
root@162-55-4-35:/var/www/posta-kodlari# cd /var/www/posta-kodlari
root@162-55-4-35:/var/www/posta-kodlari# pm2 start ecosystem.config.js --env production
[PM2][ERROR] File ecosystem.config.js malformated
ReferenceError: module is not defined in ES module scope
This file is being treated as an ES module because it has a '.js' file extension and '/var/www/posta-kodlari/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
    at file:///var/www/posta-kodlari/ecosystem.config.js:1:1
    at ModuleJobSync.runSync (node:internal/modules/esm/module_job:437:37)
    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:389:47)
    at loadESMFromCJS (node:internal/modules/cjs/loader:1363:24)
    at Module._compile (node:internal/modules/cjs/loader:1503:5)
    at Module._extensions..js (node:internal/modules/cjs/loader:1623:10)
    at Module.load (node:internal/modules/cjs/loader:1266:32)
    at Module._load (node:internal/modules/cjs/loader:1091:12)
    at Module.require (node:internal/modules/cjs/loader:1289:19)
    at require (node:internal/modules/helpers:182:18)
